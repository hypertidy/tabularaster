<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract cell numbers from a Raster object. — cellnumbers • tabularaster</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extract cell numbers from a Raster object. — cellnumbers" />
<meta property="og:description" content="Provide the 'cellnumbers' capability of raster::extract and friends
directly, returning a data frame of query-object identifiers 'object_'
and the cell number." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabularaster</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cell-index-raster-abstraction.html">The raster functions for cell abstraction</a>
    </li>
    <li>
      <a href="../articles/tabularaster-usage.html">Tabularaster</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hypertidy/tabularaster/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract cell numbers from a Raster object.</h1>
    <small class="dont-index">Source: <a href='https://github.com/hypertidy/tabularaster/blob/master/R/cellnumbers.R'><code>R/cellnumbers.R</code></a></small>
    <div class="hidden name"><code>cellnumbers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Provide the 'cellnumbers' capability of <a href='https://rdrr.io/pkg/raster/man/extract.html'>raster::extract</a> and friends
directly, returning a data frame of query-object identifiers 'object_'
and the cell number.</p>
    </div>

    <pre class="usage"><span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>query</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>query</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for SpatialLines</span>
<span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>query</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for sfc</span>
<span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>query</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for sf</span>
<span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>query</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Raster object</p></td>
    </tr>
    <tr>
      <th>query</th>
      <td><p>Spatial object or matrix of coordinates</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>unused</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data frame (tibble) with columns</p><ul>
<li><p><code>object_</code> - the object ID (what row is it from the spatial object)</p></li>
<li><p><code>cell_</code>   - the cell number of the raster</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Raster data is inherently 2-dimensional, with a time or 'level' dimension
treated like a layers of these 2D forms. The 'raster' package cell number
is counted from 1 at the top-left, across the rows and down. This corresponds
the the standard "raster graphics" convention used by 'GDAL' and the 'sp'
package, and many other implementations. Note that this is different to the
convention used by the <a href='https://rdrr.io/r/graphics/image.html'>graphics::image</a> function.</p>
<p>Currently this function only operates as if the input is a single layer objects, it's not clear if adding
an extra level of grouping for layers would be sensible.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rspatial.org/raster'>raster</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: sp</span></div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:raster’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, select, union</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span><span class='op'>(</span><span class='va'>volcano</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/aggregate.html'>aggregate</a></span><span class='op'>(</span>fact <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
<span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>r</span>, <span class='fu'><a href='https://rdrr.io/pkg/raster/man/rasterToContour.html'>rasterToContour</a></span><span class='op'>(</span><span class='va'>r</span>, level <span class='op'>=</span> <span class='fl'>120</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 64 x 2</span><span>
#&gt;    object_ cell_
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>       1     8
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>       1     9
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>       1    10
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>       1    11
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>       1    21
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>       1    22
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>       1    23
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>       1    24
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>       1    27
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>       1    28
#&gt; </span><span style='color: #949494;'># … with 54 more rows</span><span></div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='va'>cr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/cut.html'>cut</a></span><span class='op'>(</span><span class='va'>r</span>,  <span class='fu'><a href='https://rdrr.io/r/base/pretty.html'>pretty</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/getValues.html'>values</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='va'>tt</span> <span class='op'>&lt;-</span> <span class='fu'>cellnumbers</span><span class='op'>(</span><span class='va'>cr</span>, <span class='va'>polycano</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>projections not the same </span>
#&gt; <span class='message'>    x: NA</span>
#&gt; <span class='message'>query: NAFALSE</span></div><div class='output co'>#&gt; <span class='message'>cellnumbers is very slow for SpatialPolygons, consider conversion with 'sf::st_as_sf'TRUE</span></div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>tt</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>v <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/extract.html'>extract</a></span><span class='op'>(</span><span class='va'>r</span>, <span class='va'>cell_</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
<span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>object_</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
<span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span><span class='op'>)</span> 
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 7 x 2</span><span>
#&gt;   object_ `mean(v)`
#&gt;     </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>       1     157. 
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>       2     173. 
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>       3     184  
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>       4      99.5
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>       5     113. 
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>       6     128. 
#&gt; </span><span style='color: #BCBCBC;'>7</span><span>       7     142. </div><div class='input'><span class='fu'><a href='https://rdrr.io/pkg/raster/man/headtail.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/pretty.html'>pretty</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/getValues.html'>values</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>)</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1]  80 100 120 140 160 180</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Michael D. Sumner.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9000.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


